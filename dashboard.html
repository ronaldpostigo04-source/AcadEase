<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - AcadEase</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #aee7bf;
      min-height: 100vh;
    }

    header {
      background: #1b4332;
      color: rgb(255, 255, 255);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .user-email {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .menu-icon {
      font-size: 26px;
      cursor: pointer;
      user-select: none;
      padding: 5px;
    }

    .side-nav {
      position: fixed;
      top: 0;
      right: -250px;
      width: 250px;
      height: 100%;
      background: #1b4332;
      color: white;
      padding-top: 60px;
      transition: 0.3s;
      z-index: 1000;
    }

    .side-nav.active {
      right: 0;
    }

    .side-nav a, .side-nav button {
      display: block;
      color: white;
      text-decoration: none;
      padding: 15px 25px;
      font-size: 1.1rem;
      transition: 0.3s;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
    }

    .side-nav a:hover, .side-nav button:hover {
      background: #40916c;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      z-index: 500;
    }

    .overlay.active {
      display: block;
    }

    main {
      padding: 40px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .welcome-section {
      text-align: center;
      margin-bottom: 40px;
    }

    .welcome-section h1 {
      color: #1b4332;
      margin-bottom: 20px;
      font-size: 2.5rem;
    }

    .welcome-section p {
      color: #555;
      font-size: 1.1rem;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .dashboard-card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }

    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.15);
    }

    .dashboard-card h3 {
      color: #1b4332;
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    /* Section Styles */
    .section {
      display: none;
      margin-top: 40px;
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section h2 {
      color: #1b4332;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.8rem;
    }

    /* Calendar Section */
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .calendar-nav {
      display: flex;
      gap: 10px;
    }

    .calendar-nav button {
      background: #1b4332;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .calendar-nav button:hover {
      background: #2d6a4f;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: #e0e0e0;
      border: 1px solid #e0e0e0;
    }

    .calendar-day-header {
      background: #1b4332;
      color: white;
      text-align: center;
      padding: 10px;
      font-weight: bold;
    }

    .calendar-day {
      background: white;
      min-height: 100px;
      padding: 8px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }

    .calendar-day:hover {
      background: #f5f5f5;
    }

    .calendar-day.empty {
      background: #f9f9f9;
      cursor: default;
    }

    .calendar-day.today {
      background: #e8f5e8;
      border: 2px solid #40916c;
    }

    .calendar-day.has-assignment {
      background: #fff9e6;
      border: 2px solid #f0ad4e;
    }

    .day-number {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .event {
      background: #40916c;
      color: white;
      padding: 2px 5px;
      border-radius: 3px;
      font-size: 0.8rem;
      margin-bottom: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .event.assignment {
      background: #d9534f;
    }

    .event.exam {
      background: #f0ad4e;
    }

    .event.class {
      background: #5bc0de;
    }

    .calendar-legend {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9rem;
    }

    .legend-color {
      width: 15px;
      height: 15px;
      border-radius: 3px;
    }

    /* Course Section */
    .course-info {
      text-align: center;
      margin-bottom: 30px;
    }

    .course-info h3 {
      color: #1b4332;
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .course-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .detail-card {
      background: #e8f5e8;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    .detail-card h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }

    /* Classroom Section */
    .classroom-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .classroom-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .classroom-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.15);
    }

    .classroom-header {
      background: #1b4332;
      color: white;
      padding: 15px;
    }

    .classroom-header h3 {
      margin: 0;
      font-size: 1.3rem;
    }

    .classroom-body {
      padding: 20px;
    }

    .classroom-info {
      margin-bottom: 15px;
    }

    .classroom-info p {
      margin: 5px 0;
      color: #555;
    }

    .classroom-actions {
      display: flex;
      gap: 10px;
    }

    .classroom-btn {
      flex: 1;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s;
    }

    .classroom-btn.primary {
      background: #1b4332;
      color: white;
    }

    .classroom-btn.secondary {
      background: #e8f5e8;
      color: #1b4332;
    }

    .classroom-btn:hover {
      opacity: 0.9;
    }

    /* Google Meet Section */
    .meet-container {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    .meet-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .meet-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .meet-logo {
      width: 50px;
      height: 50px;
      background: #1a73e8;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .meet-details h3 {
      color: #1b4332;
      margin-bottom: 5px;
    }

    .meet-details p {
      color: #666;
      margin: 0;
    }

    .meet-actions {
      display: flex;
      gap: 10px;
    }

    .meet-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .meet-btn.primary {
      background: #1a73e8;
      color: white;
    }

    .meet-btn.secondary {
      background: #f1f3f4;
      color: #1b4332;
    }

    .meet-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .meet-preview {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      text-align: center;
    }

    .meet-preview h4 {
      color: #1b4332;
      margin-bottom: 15px;
    }

    .meet-link {
      background: white;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 15px;
      word-break: break-all;
      border: 1px solid #e0e0e0;
    }

    .meet-link a {
      color: #1a73e8;
      text-decoration: none;
      font-weight: 500;
    }

    .meet-link a:hover {
      text-decoration: underline;
    }

    .copy-btn {
      background: #1b4332;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .copy-btn:hover {
      background: #2d6a4f;
    }

    /* Grades Section */
    .grades-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .grade-card {
      background: #e8f5e8;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    .grade-card h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }

    .grade-value {
      font-size: 2rem;
      font-weight: bold;
      color: #1b4332;
    }

    .grades-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .grades-table th, .grades-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    .grades-table th {
      background: #1b4332;
      color: white;
    }

    .grades-table tr:hover {
      background: #f5f5f5;
    }

    /* Assignment/Activity Section */
    .assignment-form {
      background: #e8f5e8;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #1b4332;
      font-weight: 500;
    }

    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .btn {
      background: #1b4332;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:hover {
      background: #2d6a4f;
    }

    .assignment-list {
      margin-top: 20px;
    }

    .assignment-item {
      background: white;
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-left: 4px solid #40916c;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .assignment-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .assignment-item h3 {
      color: #1b4332;
      margin-bottom: 10px;
    }

    .assignment-item p {
      color: #666;
      margin-bottom: 10px;
    }

    .assignment-item .deadline {
      color: #d9534f;
      font-weight: bold;
    }

    .assignment-item .submission-status {
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .assignment-item .submitted {
      color: #28a745;
      font-weight: bold;
    }

    .assignment-item .not-submitted {
      color: #dc3545;
      font-weight: bold;
    }

    .empty-state {
      text-align: center;
      color: #666;
      padding: 40px;
      background: white;
      border-radius: 10px;
      margin: 20px auto;
      max-width: 500px;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    .modal h3 {
      color: #1b4332;
      margin-bottom: 20px;
    }

    .modal-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }

    .modal-buttons button {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .btn-primary {
      background: #1b4332;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .submission-link {
      margin-top: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      word-break: break-all;
    }

    .submission-link a {
      color: #1b4332;
      text-decoration: none;
      font-weight: bold;
    }

    .submission-link a:hover {
      text-decoration: underline;
    }

    /* Participants List */
    .participants-list {
      margin-top: 20px;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
    }

    .participant-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #f0f0f0;
    }

    .participant-item:last-child {
      border-bottom: none;
    }

    .participant-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #1b4332;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 10px;
    }

    .participant-info {
      flex: 1;
    }

    .participant-name {
      font-weight: 500;
      color: #1b4332;
    }

    .participant-role {
      font-size: 0.8rem;
      color: #666;
    }

    .participant-role.professor {
      color: #d9534f;
      font-weight: bold;
    }

    .participant-role.student {
      color: #5bc0de;
    }

    .class-status {
      margin-top: 15px;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      font-weight: 500;
    }

    .class-status.active {
      background: #e8f5e8;
      color: #1b4332;
    }

    .class-status.inactive {
      background: #f8d7da;
      color: #721c24;
    }

    /* Event Details Modal */
    .event-details {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .event-details h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }

    .event-details p {
      margin-bottom: 10px;
    }

    .event-details .event-type {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 4px;
      color: white;
      font-size: 0.8rem;
    }

    .event-details .event-type.assignment {
      background: #d9534f;
    }

    .event-details .event-type.exam {
      background: #f0ad4e;
    }

    .event-details .event-type.class {
      background: #5bc0de;
    }

    .event-details .event-type.event {
      background: #40916c;
    }

    /* File Upload Styles */
    .file-upload {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 2px dashed #ddd;
    }

    .file-upload input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
    }

    .file-preview {
      margin-top: 15px;
    }

    .file-item {
      display: flex;
      align-items: center;
      padding: 10px;
      background: white;
      border-radius: 5px;
      margin-bottom: 10px;
      border: 1px solid #e0e0e0;
    }

    .file-icon {
      width: 40px;
      height: 40px;
      background: #1b4332;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      margin-right: 10px;
      font-weight: bold;
    }

    .file-info {
      flex: 1;
    }

    .file-name {
      font-weight: 500;
      color: #1b4332;
    }

    .file-size {
      font-size: 0.8rem;
      color: #666;
    }

    .file-actions {
      display: flex;
      gap: 5px;
    }

    .file-btn {
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.8rem;
    }

    .file-btn.view {
      background: #1b4332;
      color: white;
    }

    .file-btn.download {
      background: #40916c;
      color: white;
    }

    .file-btn.delete {
      background: #d9534f;
      color: white;
    }

    /* File Type Colors */
    .file-icon.pdf {
      background: #d9534f;
    }

    .file-icon.doc, .file-icon.docx {
      background: #1a73e8;
    }

    .file-icon.wps {
      background: #f0ad4e;
    }

    .file-icon.txt {
      background: #6c757d;
    }

    .file-icon.other {
      background: #1b4332;
    }

    /* Output List Styles */
    .output-list {
      margin-top: 20px;
    }

    .output-item {
      background: white;
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-left: 4px solid #40916c;
    }

    .output-item h3 {
      color: #1b4332;
      margin-bottom: 10px;
    }

    .output-item p {
      color: #666;
      margin-bottom: 10px;
    }

    .output-item .date {
      color: #d9534f;
      font-weight: bold;
    }

    /* Activity Section Styles */
    .activity-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-top: 20px;
    }
    
    .activity-form-container {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .activity-list-container {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .activity-list {
      max-height: 500px;
      overflow-y: auto;
      margin-top: 20px;
    }
    
    .activity-item {
      background: #f8f9fa;
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-left: 4px solid #40916c;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .activity-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .activity-item h3 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .activity-item p {
      color: #666;
      margin-bottom: 10px;
    }
    
    .activity-item .date {
      color: #d9534f;
      font-weight: bold;
    }
    
    .activity-item .type {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 4px;
      color: white;
      font-size: 0.8rem;
      margin-top: 5px;
    }
    
    .activity-item .type.assignment {
      background: #d9534f;
    }
    
    .activity-item .type.activity {
      background: #5bc0de;
    }
    
    .activity-item .type.project {
      background: #f0ad4e;
    }
    
    .activity-item .type.exam {
      background: #40916c;
    }
    
    .submission-section {
      margin-top: 15px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    
    .submission-section h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .submission-link {
      margin-top: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      word-break: break-all;
    }
    
    .submission-link a {
      color: #1b4332;
      text-decoration: none;
      font-weight: bold;
    }
    
    .submission-link a:hover {
      text-decoration: underline;
    }
    
    .submission-status {
      margin-top: 10px;
      font-size: 0.9rem;
      font-weight: bold;
    }
    
    .submission-status.submitted {
      color: #28a745;
    }
    
    .submission-status.not-submitted {
      color: #dc3545;
    }
    
    .submission-form {
      margin-top: 15px;
    }
    
    .submission-form textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 10px;
      resize: vertical;
    }
    
    .submission-form button {
      background: #1b4332;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .submission-form button:hover {
      background: #2d6a4f;
    }
    
    .empty-state {
      text-align: center;
      color: #666;
      padding: 40px;
      background: white;
      border-radius: 10px;
      margin: 20px auto;
      max-width: 500px;
    }

    /* Professor View Styles */
    .professor-view {
      margin-top: 30px;
      padding: 20px;
      background: #e8f5e8;
      border-radius: 10px;
    }
    
    .professor-view h3 {
      color: #1b4332;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .student-submissions {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .student-submission-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .student-submission-card h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .student-submission-card p {
      color: #666;
      margin-bottom: 10px;
    }
    
    .student-submission-card .submission-link {
      margin-top: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      word-break: break-all;
    }
    
    .student-submission-card .submission-link a {
      color: #1a73e8;
      text-decoration: none;
      font-weight: 500;
    }
    
    .student-submission-card .submission-link a:hover {
      text-decoration: underline;
    }
    
    .student-submission-card .submission-date {
      color: #666;
      font-size: 0.9rem;
      margin-top: 10px;
    }
    
    .toggle-professor-view {
      background: #1b4332;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    
    .toggle-professor-view:hover {
      background: #2d6a4f;
    }
    
    .grade-section {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .grade-section h4 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .grade-form {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .grade-input {
      width: 80px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .grade-display {
      margin-top: 10px;
      padding: 10px;
      background: white;
      border-radius: 5px;
      border: 1px solid #e0e0e0;
    }
    
    .grade-display h5 {
      color: #1b4332;
      margin-bottom: 5px;
    }
    
    .grade-value {
      font-size: 1.2rem;
      font-weight: bold;
      color: #1b4332;
    }
    
    .grade-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .grade-btn {
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    
    .grade-btn.primary {
      background: #1b4332;
      color: white;
    }
    
    .grade-btn.secondary {
      background: #6c757d;
      color: white;
    }

    /* Student Submission Viewer Styles */
    .submission-viewer {
      margin-top: 20px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
    }
    
    .submission-viewer h4 {
      color: #1b4332;
      margin-bottom: 15px;
    }
    
    .submission-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    
    .submission-content h5 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .submission-content p {
      color: #666;
      margin-bottom: 15px;
    }
    
    .submission-preview {
      margin-top: 15px;
      padding: 15px;
      background: #e8f5e8;
      border-radius: 8px;
    }
    
    .submission-preview h6 {
      color: #1b4332;
      margin-bottom: 10px;
    }
    
    .file-preview-container {
      margin-top: 10px;
    }
    
    .embedded-content {
      width: 100%;
      height: 400px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .no-preview {
      padding: 20px;
      text-align: center;
      color: #666;
      background: rgb(151, 202, 174);
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>AcadEase Dashboard</h1>
    <div class="user-info">
      <span class="menu-icon" onclick="toggleMenu()">☰</span>
    </div>
  </header>

  <div class="side-nav" id="sideNav">
    <a href="#" onclick="showSection('courses')">My Courses</a>
    <a href="#" onclick="showSection('classroom')">Classroom</a>
    <a href="#" onclick="showSection('calendar')">Schedule</a>
    <a href="#" onclick="showSection('activity')">Activity</a>
    <a href="#" onclick="showSection('grades')">Grades</a>
    <button onclick="logout()">Logout</button>
  </div>

  <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

  <main>
    <div class="welcome-section">
      <h1>Welcome to AcadEase Dashboard</h1>
      <p>AcadEase is a simple to use academic management platform that helps students easily manage their academic work,
         schedules, and deadlines. The platform has an organized and intuitive design that helps students track important 
         deadlines, keep track of their classes, and manage expectations for academic success.</p>
    </div>

    <!-- Calendar Section -->
    <div class="section" id="calendarSection">
      <h2>Academic Calendar</h2>
      <div class="calendar-header">
        <div class="calendar-nav">
          <button onclick="previousMonth()">← Previous</button>
          <button onclick="nextMonth()">Next →</button>
        </div>
        <h3 id="currentMonthYear">Month Year</h3>
        <button class="btn" onclick="openAddEventModal()">+ Add Assignment</button>
      </div>
      
      <div class="calendar-grid" id="calendarGrid">
        <!-- Calendar will be generated here -->
      </div>
      
      <div class="calendar-legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #40916c;"></div>
          <span>Event</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #d9534f;"></div>
          <span>Assignment</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #f0ad4e;"></div>
          <span>Exam</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #5bc0de;"></div>
          <span>Class</span>
        </div>
      </div>
    </div>

    <!-- Courses Section -->
    <div class="section" id="coursesSection">
      <h2>My Courses</h2>
      <div class="course-info">
        <h3>WEB DEVELOPMENT</h3>
        <p>Course Code: CPT11 | Instructor: Prof. Jerome A Yanga.</p>
      </div>
      
      <div class="course-details">
        <div class="detail-card">
          <h4>Course Subject Type</h4>
          <p>Learn front-end and back-end web development technologies including HTML, CSS, JavaScript, and Node.js.</p>
        </div>
        <div class="detail-card">
          <h4>Schedule</h4>
          <p>Tuesday & Thursday<br>7:30 AM -10:00 AM</p>
        </div>
        <div class="detail-card">
          <h4>Location</h4>
          <p>Building A304/CET CENTER</p>
        </div>
        <div class="detail-card">
          <h4>Requirements</h4>
          <p>Exam: 30%<br>Performance: 40%<br>Recitation/attendance: 30%</p>
        </div>
      </div>
    </div>

    <!-- Classroom Section -->
    <div class="section" id="classroomSection">
      <h2>Virtual Classroom</h2>
      
      <!-- Google Meet Section for Web Development -->
      <div class="meet-container">
        <div class="meet-header">
          <div class="meet-info">
            <div class="meet-logo">GM</div>
            <div class="meet-details">
              <h3>Web Development - Google Meet</h3>
              <p>Join your Web Development class online</p>
            </div>
          </div>
          <div class="meet-actions">
            <button class="meet-btn primary" onclick="joinGoogleMeet()">
              <span></span> Join Now
            </button>
            <button class="meet-btn secondary" onclick="viewMeetDetails()">
              <span></span> Details
            </button>
          </div>
        </div>
        
        <div class="meet-preview">
          <h4>Class Meeting Information</h4>
          <div class="meet-link">
            <a href="https://meet.google.com/acadease-web-dev" target="_blank" id="meetLink">
              https://meet.google.com/acadease-web-dev
            </a>
          </div>
          <button class="copy-btn" onclick="copyMeetLink()">Copy Link</button>
          <div style="margin-top: 15px; font-size: 0.9rem; color: #666;">
            <p><strong>Session:</strong> Tuesday/Thursday, 10:00 AM - 11:30 AM</p>
            <p><strong>Instructor:</strong> Prof. Jerome A Yanga.</p>
            <p><strong>Meeting ID:</strong> webdev123</p>
          </div>
        </div>
      </div>
      
      <div class="classroom-container">
        <div class="classroom-card">
          <div class="classroom-header">
            <h3>WEB DEVELOPMENT</h3>
          </div>
          <div class="classroom-body">
            <div class="classroom-info">
              <p><strong>Instructor:</strong> Prof. Jerome A Yanga</p>
              <p><strong>Schedule:</strong> Tuesday, 7:30 AM</p>
              <p><strong>Next Session:</strong> Thursday, 7:30 PM</p>
              <p><strong>Class Code:</strong> acadease123</p>
            </div>
            
            <div id="classStatus" class="class-status inactive">
              You are not currently joined to this class
            </div>
            
            <div class="classroom-actions">
              <button class="classroom-btn primary" onclick="openJoinClassModal()">Join Class</button>
              <button class="classroom-btn secondary" onclick="toggleParticipants()">View Participants</button>
            </div>
            
            <div id="participantsList" class="participants-list" style="display: none;">
              <h4>Class Participants</h4>
              <!-- Participants will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Activity Section -->
    <div class="section" id="activitySection">
      <h2>Activities & Assignments</h2>
      
      <div class="activity-container">
        <div class="activity-form-container">
          <h3>Create New Activity/Assignment</h3>
          <form id="activityForm">
            <div class="form-group">
              <label for="activityTitle">Title</label>
              <input type="text" id="activityTitle" placeholder="Enter activity/assignment title" required>
            </div>
            <div class="form-group">
              <label for="activityDescription">Description</label>
              <textarea id="activityDescription" placeholder="Enter activity/assignment description" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label for="activityDate">Date of Submission</label>
              <input type="date" id="activityDate" required>
            </div>
            <div class="form-group">
              <label for="activityType">Type</label>
              <select id="activityType">
                <option value="activity">Activity</option>
                <option value="assignment">Assignment</option>
                <option value="project">Project</option>
                <option value="exam">Exam</option>
              </select>
            </div>
            
            <button type="submit" class="btn" style="width: 100%;">Create Now</button>
          </form>
        </div>
        
        <div class="activity-list-container">
          <h3>My Activities & Assignments</h3>
          <div id="activityList" class="activity-list">
            <!-- Activities will be loaded here -->
          </div>
        </div>
      </div>
      
      <!-- Professor View -->
      <div class="professor-view" id="professorView" style="display: none;">
        <h3>Professor View - Student Submissions</h3>
        <div id="studentSubmissions" class="student-submissions">
          <!-- Student submissions will be loaded here -->
        </div>
      </div>
      
      <button class="toggle-professor-view" onclick="toggleProfessorView()">Toggle Professor View</button>
    </div>

    <!-- Grades Section -->
    <div class="section" id="gradesSection">
      <h2>Academic Performance</h2>
      
      <div class="grades-summary">
        <div class="grade-card">
          <h4>Current GPA</h4>
          <div class="grade-value">3.00</div>
          <p>Out of 3.50</p>
        </div>
        <div class="grade-card">
          <h4>WEB DEVELOPMENT</h4>
          <div class="grade-value">100%</div>
          <p>Grade: 1.00</p>
        </div>
        <div class="grade-card">
          <h4>Completed Credits</h4>
          <div class="grade-value">60%</div>
          <p>Out of 100</p>
        </div>
      </div>
      
      <table class="grades-table">
        <thead>
          <tr>
            <th>Course</th>
            <th>Assignment</th>
            <th>Score</th>
            <th>Total of 100%</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>WEB DEVELOPMENT</td>
            <td>HTML/CSS Project</td>
            <td>40%</td>
            <td>40</td>
          </tr>
          <tr>
            <td>WEB DEVELOPMENT</td>
            <td>Quiz/Activity</td>
            <td>30%</td>
            <td>30</td>
          </tr>
          <tr>
            <td>WEB DEVELOPMENT</td>
            <td>Midterm Exam</td>
            <td>30%</td>
            <td>30</td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <!-- Join Class Modal -->
  <div class="modal" id="joinClassModal">
    <div class="modal-content">
      <h3>Join Web Development Class</h3>
      <p>Enter the class code provided by your instructor to join this class.</p>
      
      <div class="form-group">
        <label for="classCode">Class Code</label>
        <input type="text" id="classCode" placeholder="Enter class code" required>
      </div>
      
      <div class="modal-buttons">
        <button type="button" class="btn-secondary" onclick="closeJoinClassModal()">Cancel</button>
        <button type="button" class="btn-primary" onclick="joinClass()">Join Class</button>
      </div>
    </div>
  </div>

  <!-- Add Event Modal -->
  <div class="modal" id="addEventModal">
    <div class="modal-content">
      <h3>Add Assignment to Calendar</h3>
      <form id="eventForm">
        <div class="form-group">
          <label for="eventTitle">Assignment Title</label>
          <input type="text" id="eventTitle" placeholder="Enter assignment title" required>
        </div>
        <div class="form-group">
          <label for="eventDescription">Description</label>
          <textarea id="eventDescription" placeholder="Enter assignment description" rows="3"></textarea>
        </div>
        <div class="form-group">
          <label for="eventDate">Due Date</label>
          <input type="date" id="eventDate" required>
        </div>
        <div class="form-group">
          <label for="eventType">Assignment Type</label>
          <select id="eventType">
            <option value="assignment">Assignment</option>
            <option value="exam">Exam</option>
            <option value="project">Project</option>
            <option value="activity">Activity</option>
          </select>
        </div>
        
        <div class="file-upload">
          <h4>Upload Files</h4>
          <p>Upload assignment files (PDF, DOC, DOCX, WPS, TXT, etc.)</p>
          <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.wps,.txt">
          <div id="filePreview" class="file-preview">
            <!-- File previews will appear here -->
          </div>
        </div>
        
        <div class="modal-buttons">
          <button type="button" class="btn-secondary" onclick="closeAddEventModal()">Cancel</button>
          <button type="submit" class="btn-primary">Add Assignment</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Event Details Modal -->
  <div class="modal" id="eventDetailsModal">
    <div class="modal-content">
      <h3 id="eventDetailsTitle">Assignment Details</h3>
      <div id="eventDetailsContent">
        <!-- Assignment details will be loaded here -->
      </div>
      <div class="modal-buttons">
        <button type="button" class="btn-secondary" onclick="closeEventDetailsModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Activity Submission Modal -->
  <div class="modal" id="activitySubmissionModal">
    <div class="modal-content">
      <h3 id="activitySubmissionTitle">Submit Your Work</h3>
      <div id="activitySubmissionContent">
        <!-- Activity details will be loaded here -->
      </div>
      
      <div class="submission-section">
        <h4>Submit Your Work</h4>
        <p>You can submit your work by providing a link to your file (Google Drive, Dropbox, etc.) or uploading a file directly.</p>
        
        <div class="submission-form">
          <textarea id="submissionLink" placeholder="Paste your submission link here (Google Drive, Dropbox, etc.)"></textarea>
          <p>Or upload a file:</p>
          <input type="file" id="submissionFile" accept=".pdf,.doc,.docx,.wps,.txt">
          <button type="button" onclick="submitActivity()">Submit Work</button>
        </div>
      </div>
      
      <div class="modal-buttons">
        <button type="button" class="btn-secondary" onclick="closeActivitySubmissionModal()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Grade Submission Modal -->
  <div class="modal" id="gradeSubmissionModal">
    <div class="modal-content">
      <h3 id="gradeSubmissionTitle">Grade Student Submission</h3>
      <div id="gradeSubmissionContent">
        <!-- Student submission details will be loaded here -->
      </div>
      
      <div class="grade-section">
        <h4>Grade This Submission</h4>
        <div class="grade-form">
          <input type="number" id="gradeInput" class="grade-input" placeholder="Score" min="0" max="100" required>
          <span>/ 100</span>
          <button type="button" class="grade-btn primary" onclick="submitGrade()">Submit Grade</button>
        </div>
      </div>
      
      <div class="modal-buttons">
        <button type="button" class="btn-secondary" onclick="closeGradeSubmissionModal()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Student Submission Viewer Modal -->
  <div class="modal" id="submissionViewerModal">
    <div class="modal-content">
      <h3 id="submissionViewerTitle">Student Submission</h3>
      <div id="submissionViewerContent">
        <!-- Student submission content will be loaded here -->
      </div>
      
      <div class="modal-buttons">
        <button type="button" class="btn-secondary" onclick="closeSubmissionViewerModal()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Calendar variables
    let currentDate = new Date();
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();
    let uploadedFiles = [];
    let selectedActivityId = null;
    let selectedSubmissionForGrading = null;

    // Menu toggle function
    function toggleMenu() {
      document.getElementById("sideNav").classList.toggle("active");
      document.getElementById("overlay").classList.toggle("active");
    }

    // Show specific section
    function showSection(sectionName) {
      // Hide all sections
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Show selected section
      document.getElementById(sectionName + 'Section').classList.add('active');
      
      // Close mobile menu
      toggleMenu();
      
      // If showing calendar, generate it
      if (sectionName === 'calendar') {
        generateCalendar();
      }
      
      // If showing classroom, load participants
      if (sectionName === 'classroom') {
        loadParticipants();
      }
      
      // If showing activity, load activities
      if (sectionName === 'activity') {
        loadActivities();
      }
    }

    // Google Meet functions
    function joinGoogleMeet() {
      window.open('https://meet.google.com/acadease-web-dev', '_blank');
    }

    function viewMeetDetails() {
      alert('Web Development Class - Google Meet\n\nMeeting Link: https://meet.google.com/acadease-web-dev\nSchedule: Monday & Wednesday, 10:00 AM - 11:30 AM\nInstructor: Prof. Smith\n\nPlease join 5 minutes before the scheduled time.');
    }

    function copyMeetLink() {
      const meetLink = document.getElementById('meetLink').textContent;
      navigator.clipboard.writeText(meetLink).then(() => {
        alert('Meeting link copied to clipboard!');
      });
    }

    // Classroom functions
    function openJoinClassModal() {
      document.getElementById('joinClassModal').classList.add('active');
    }

    function closeJoinClassModal() {
      document.getElementById('joinClassModal').classList.remove('active');
      document.getElementById('classCode').value = '';
    }

    function joinClass() {
      const classCode = document.getElementById('classCode').value;
      const correctCode = 'acadease123';
      
      if (classCode === correctCode) {
        // Get current user info
        const userEmail = localStorage.getItem('userEmail') || 'student@example.com';
        const userName = userEmail ? userEmail.split('@')[0] : 'Student';
        
        // Add user to participants list
        const participants = JSON.parse(localStorage.getItem('classParticipants')) || [];
        
        // Check if user is already in the list
        const existingUser = participants.find(p => p.email === userEmail);
        
        if (!existingUser) {
          participants.push({
            name: userName,
            email: userEmail,
            role: 'student',
            joinedAt: new Date().toISOString()
          });
          
          localStorage.setItem('classParticipants', JSON.stringify(participants));
        }
        
        // Update UI
        document.getElementById('classStatus').textContent = 'You have successfully joined this class';
        document.getElementById('classStatus').className = 'class-status active';
        
        // Close modal and reload participants
        closeJoinClassModal();
        loadParticipants();
        
        alert('Successfully joined the Web Development class!');
      } else {
        alert('Invalid class code. Please check with your instructor and try again.');
      }
    }

    function toggleParticipants() {
      const participantsList = document.getElementById('participantsList');
      if (participantsList.style.display === 'none') {
        participantsList.style.display = 'block';
        loadParticipants();
      } else {
        participantsList.style.display = 'none';
      }
    }

    function loadParticipants() {
      const participantsList = document.getElementById('participantsList');
      const participants = JSON.parse(localStorage.getItem('classParticipants')) || [];
      
      // Check if current user is in the participants list
      const userEmail = localStorage.getItem('userEmail') || 'student@example.com';
      const isJoined = participants.some(p => p.email === userEmail);
      
      // Update class status
      const classStatus = document.getElementById('classStatus');
      if (isJoined) {
        classStatus.textContent = 'You are currently joined to this class';
        classStatus.className = 'class-status active';
      } else {
        classStatus.textContent = 'You are not currently joined to this class';
        classStatus.className = 'class-status inactive';
      }
      
      // If participants list is visible, update it
      if (participantsList.style.display === 'block') {
        if (participants.length === 0) {
          participantsList.innerHTML = '<p>No participants yet. Be the first to join!</p>';
          return;
        }
        
        let participantsHTML = '<h4>Class Participants</h4>';
        
        participants.forEach(participant => {
          const initial = participant.name.charAt(0).toUpperCase();
          const roleClass = participant.role === 'professor' ? 'professor' : 'student';
          
          participantsHTML += `
            <div class="participant-item">
              <div class="participant-avatar">${initial}</div>
              <div class="participant-info">
                <div class="participant-name">${participant.name}</div>
                <div class="participant-role ${roleClass}">${participant.role}</div>
              </div>
            </div>
          `;
        });
        
        participantsList.innerHTML = participantsHTML;
      }
    }

    // Display user email
    function displayUserInfo() {
      const userEmail = localStorage.getItem('userEmail') || 'student@example.com';
      document.getElementById('userEmail').textContent = userEmail;
    }

    // Calendar functions
    function generateCalendar() {
      const calendarGrid = document.getElementById('calendarGrid');
      const monthYearDisplay = document.getElementById('currentMonthYear');
      
      // Clear previous calendar
      calendarGrid.innerHTML = '';
      
      // Set month and year display
      const monthNames = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"];
      monthYearDisplay.textContent = `${monthNames[currentMonth]} ${currentYear}`;
      
      // Create day headers
      const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
      dayNames.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'calendar-day-header';
        dayHeader.textContent = day;
        calendarGrid.appendChild(dayHeader);
      });
      
      // Get first day of month and number of days
      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      
      // Add empty cells for days before the first day of the month
      for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day empty';
        calendarGrid.appendChild(emptyDay);
      }
      
      // Add days of the month
      const today = new Date();
      for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        
        // Check if this is today
        if (day === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear()) {
          dayElement.classList.add('today');
        }
        
        dayElement.innerHTML = `<div class="day-number">${day}</div>`;
        
        // Add events for this day
        addEventsToDay(dayElement, day);
        
        // Add click event to open event details
        dayElement.onclick = () => showEventsForDay(day);
        
        calendarGrid.appendChild(dayElement);
      }
    }
    
    function addEventsToDay(dayElement, day) {
      const events = JSON.parse(localStorage.getItem('calendarEvents')) || [];
      const dateStr = `${currentYear}-${(currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
      
      const dayEvents = events.filter(event => event.date === dateStr);
      
      // Highlight days with assignments
      if (dayEvents.length > 0) {
        dayElement.classList.add('has-assignment');
      }
      
      dayEvents.forEach(event => {
        const eventElement = document.createElement('div');
        eventElement.className = `event ${event.type}`;
        eventElement.textContent = event.title;
        eventElement.title = `${event.title}: ${event.description || 'No description'}`;
        dayElement.appendChild(eventElement);
      });
    }
    
    function showEventsForDay(day) {
      const dateStr = `${currentYear}-${(currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
      const events = JSON.parse(localStorage.getItem('calendarEvents')) || [];
      const dayEvents = events.filter(event => event.date === dateStr);
      
      if (dayEvents.length === 0) {
        alert(`No assignments scheduled for ${dateStr}`);
        return;
      }
      
      // Show assignment details in modal
      document.getElementById('eventDetailsTitle').textContent = `Assignments for ${dateStr}`;
      
      let eventsHTML = '';
      dayEvents.forEach(event => {
        // Generate file list HTML
        let fileListHTML = '';
        if (event.files && event.files.length > 0) {
          fileListHTML = '<h4>📎 Attached Files:</h4>';
          event.files.forEach(file => {
            const fileType = getFileType(file.name);
            fileListHTML += `
              <div class="file-item">
                <div class="file-icon ${fileType}">${fileType.toUpperCase()}</div>
                <div class="file-info">
                  <div class="file-name">${file.name}</div>
                  <div class="file-size">${formatFileSize(file.size)}</div>
                </div>
                <div class="file-actions">
                  <button class="file-btn view" onclick="viewFile('${file.url}')">View</button>
                  <button class="file-btn download" onclick="downloadFile('${file.url}', '${file.name}')">Download</button>
                </div>
              </div>
            `;
          });
        }
        
        eventsHTML += `
          <div class="event-details">
            <h4>${event.title}</h4>
            <p>${event.description || 'No description provided'}</p>
            <p><strong>Type:</strong> <span class="event-type ${event.type}">${event.type}</span></p>
            <p><strong>Due Date:</strong> ${event.date}</p>
            ${fileListHTML}
          </div>
        `;
      });
      
      document.getElementById('eventDetailsContent').innerHTML = eventsHTML;
      document.getElementById('eventDetailsModal').classList.add('active');
    }
    
    function previousMonth() {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      generateCalendar();
    }
    
    function nextMonth() {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      generateCalendar();
    }
    
    function openAddEventModal() {
      document.getElementById('addEventModal').classList.add('active');
      
      // Set today's date as default
      const today = new Date();
      const formattedDate = today.toISOString().split('T')[0];
      document.getElementById('eventDate').value = formattedDate;
      
      // Clear previous file previews
      document.getElementById('filePreview').innerHTML = '';
      uploadedFiles = [];
      
      // Add file input change listener
      document.getElementById('fileInput').addEventListener('change', handleFileUpload);
    }

    function closeAddEventModal() {
      document.getElementById('addEventModal').classList.remove('active');
      document.getElementById('eventForm').reset();
      uploadedFiles = [];
    }

    function closeEventDetailsModal() {
      document.getElementById('eventDetailsModal').classList.remove('active');
    }

    // File upload functions
    function handleFileUpload(e) {
      const files = e.target.files;
      const filePreview = document.getElementById('filePreview');
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const fileType = getFileType(file.name);
        
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `
          <div class="file-icon ${fileType}">${fileType.toUpperCase()}</div>
          <div class="file-info">
            <div class="file-name">${file.name}</div>
            <div class="file-size">${formatFileSize(file.size)}</div>
          </div>
          <div class="file-actions">
            <button class="file-btn delete" onclick="removeFile(${i})">Remove</button>
          </div>
        `;
        
        filePreview.appendChild(fileItem);
        
        // Store file data
        uploadedFiles.push({
          name: file.name,
          size: file.size,
          type: fileType,
          file: file
        });
      }
    }
    
    function removeFile(index) {
      uploadedFiles.splice(index, 1);
      // Refresh file preview
      const filePreview = document.getElementById('filePreview');
      filePreview.innerHTML = '';
      
      uploadedFiles.forEach((file, i) => {
        const fileType = getFileType(file.name);
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `
          <div class="file-icon ${fileType}">${fileType.toUpperCase()}</div>
          <div class="file-info">
            <div class="file-name">${file.name}</div>
            <div class="file-size">${formatFileSize(file.size)}</div>
          </div>
          <div class="file-actions">
            <button class="file-btn delete" onclick="removeFile(${i})">Remove</button>
          </div>
        `;
        filePreview.appendChild(fileItem);
      });
    }
    
    function getFileType(filename) {
      const extension = filename.split('.').pop().toLowerCase();
      if (extension === 'pdf') return 'pdf';
      if (extension === 'doc' || extension === 'docx') return 'doc';
      if (extension === 'wps') return 'wps';
      if (extension === 'txt') return 'txt';
      return 'other';
    }
    
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    function viewFile(url) {
      window.open(url, '_blank');
    }
    
    function downloadFile(url, filename) {
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    // Handle event form submission
    document.getElementById("eventForm").addEventListener("submit", function(e) {
      e.preventDefault();
      
      const title = document.getElementById("eventTitle").value;
      const description = document.getElementById("eventDescription").value;
      const date = document.getElementById("eventDate").value;
      const type = document.getElementById("eventType").value;
      
      const events = JSON.parse(localStorage.getItem('calendarEvents')) || [];
      
      // Create file URLs for uploaded files
      const filesWithUrls = uploadedFiles.map(file => {
        return {
          name: file.name,
          size: file.size,
          type: file.type,
          url: URL.createObjectURL(file.file)
        };
      });
      
      events.push({
        title,
        description,
        date,
        type,
        files: filesWithUrls
      });
      
      localStorage.setItem('calendarEvents', JSON.stringify(events));
      
      // Reset form and close modal
      document.getElementById("eventForm").reset();
      closeAddEventModal();
      
      // Refresh calendar
      generateCalendar();
      
      alert("Assignment added successfully!");
    });

    // Activity functions
    function loadActivities() {
      const activityList = document.getElementById('activityList');
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      
      if (activities.length === 0) {
        activityList.innerHTML = `
          <div class="empty-state">
            <h3>No Activities Yet</h3>
            <p>Create your first activity or assignment using the form on the left.</p>
          </div>
        `;
        return;
      }
      
      let activitiesHTML = '';
      
      activities.forEach(activity => {
        const submissionStatus = activity.submission ? 'submitted' : 'not-submitted';
        const submissionText = activity.submission ? 'Submitted' : 'Not Submitted';
        
        // Check if there's a grade for this activity
        const gradeDisplay = activity.grade ? `
          <div class="grade-display">
            <h5>Your Grade:</h5>
            <div class="grade-value">${activity.grade.score}/100</div>
            ${activity.grade.feedback ? `<p><strong>Feedback:</strong> ${activity.grade.feedback}</p>` : ''}
            <p><small>Graded on: ${new Date(activity.grade.gradedAt).toLocaleString()}</small></p>
          </div>
        ` : '';
        
        activitiesHTML += `
          <div class="activity-item" onclick="openActivitySubmission('${activity.id}')">
            <h3>${activity.title}</h3>
            <p>${activity.description || 'No description provided'}</p>
            <p class="date">Due: ${activity.date}</p>
            <span class="type ${activity.type}">${activity.type}</span>
            <div class="submission-status ${submissionStatus}">${submissionText}</div>
            
            ${activity.submission ? `
              <div class="submission-link">
                <strong>Your Submission:</strong><br>
                <a href="${activity.submission.link}" target="_blank">${activity.submission.link}</a>
              </div>
            ` : ''}
            
            ${gradeDisplay}
          </div>
        `;
      });
      
      activityList.innerHTML = activitiesHTML;
    }
    
    function openActivitySubmission(activityId) {
      selectedActivityId = activityId;
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const activity = activities.find(a => a.id === activityId);
      
      if (!activity) return;
      
      document.getElementById('activitySubmissionTitle').textContent = activity.title;
      
      let activityHTML = `
        <div class="event-details">
          <h4>${activity.title}</h4>
          <p>${activity.description || 'No description provided'}</p>
          <p><strong>Type:</strong> <span class="event-type ${activity.type}">${activity.type}</span></p>
          <p><strong>Due Date:</strong> ${activity.date}</p>
        </div>
      `;
      
      document.getElementById('activitySubmissionContent').innerHTML = activityHTML;
      document.getElementById('activitySubmissionModal').classList.add('active');
    }
    
    function closeActivitySubmissionModal() {
      document.getElementById('activitySubmissionModal').classList.remove('active');
      selectedActivityId = null;
    }
    
    function submitActivity() {
      if (!selectedActivityId) return;
      
      const submissionLink = document.getElementById('submissionLink').value;
      const submissionFile = document.getElementById('submissionFile').files[0];
      
      if (!submissionLink && !submissionFile) {
        alert('Please provide either a submission link or upload a file.');
        return;
      }
      
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const activityIndex = activities.findIndex(a => a.id === selectedActivityId);
      
      if (activityIndex === -1) return;
      
      let submissionData = {
        submittedAt: new Date().toISOString(),
        submittedBy: localStorage.getItem('userEmail') || 'student@example.com'
      };
      
      if (submissionLink) {
        submissionData.link = submissionLink;
      }
      
      if (submissionFile) {
        // In a real application, you would upload the file to a server
        // For this demo, we'll just store the file name
        submissionData.fileName = submissionFile.name;
        submissionData.fileSize = submissionFile.size;
        submissionData.fileType = getFileType(submissionFile.name);
      }
      
      activities[activityIndex].submission = submissionData;
      
      localStorage.setItem('studentActivities', JSON.stringify(activities));
      
      // Reset form and close modal
      document.getElementById('submissionLink').value = '';
      document.getElementById('submissionFile').value = '';
      closeActivitySubmissionModal();
      
      // Reload activities
      loadActivities();
      
      alert('Your work has been submitted successfully!');
    }

    // Handle activity form submission
    document.getElementById("activityForm").addEventListener("submit", function(e) {
      e.preventDefault();
      
      const title = document.getElementById("activityTitle").value;
      const description = document.getElementById("activityDescription").value;
      const date = document.getElementById("activityDate").value;
      const type = document.getElementById("activityType").value;
      
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      
      // Generate a unique ID for the activity
      const activityId = 'activity_' + Date.now();
      
      activities.push({
        id: activityId,
        title,
        description,
        date,
        type,
        createdAt: new Date().toISOString(),
        submission: null,
        grade: null
      });
      
      localStorage.setItem('studentActivities', JSON.stringify(activities));
      
      // Reset form
      document.getElementById("activityForm").reset();
      
      // Set today's date as default
      const today = new Date();
      const formattedDate = today.toISOString().split('T')[0];
      document.getElementById("activityDate").value = formattedDate;
      
      // Reload activities
      loadActivities();
      
      alert("Activity created successfully!");
    });

    // Professor View Functions
    function toggleProfessorView() {
      const professorView = document.getElementById('professorView');
      if (professorView.style.display === 'none') {
        professorView.style.display = 'block';
        loadStudentSubmissions();
      } else {
        professorView.style.display = 'none';
      }
    }
    
    function loadStudentSubmissions() {
      const studentSubmissions = document.getElementById('studentSubmissions');
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const participants = JSON.parse(localStorage.getItem('classParticipants')) || [];
      
      // Get all students from participants
      const students = participants.filter(p => p.role === 'student');
      
      if (students.length === 0) {
        studentSubmissions.innerHTML = '<p>No students have joined the class yet.</p>';
        return;
      }
      
      let submissionsHTML = '';
      
      students.forEach(student => {
        // Find activities submitted by this student
        const studentActivities = activities.filter(activity => 
          activity.submission && activity.submission.submittedBy === student.email
        );
        
        if (studentActivities.length === 0) {
          submissionsHTML += `
            <div class="student-submission-card">
              <h4>${student.name}</h4>
              <p>No submissions yet</p>
            </div>
          `;
        } else {
          studentActivities.forEach(activity => {
            const gradeDisplay = activity.grade ? `
              <div class="grade-display">
                <h5>Grade: ${activity.grade.score}/100</h5>
                ${activity.grade.feedback ? `<p><strong>Feedback:</strong> ${activity.grade.feedback}</p>` : ''}
                <p><small>Graded on: ${new Date(activity.grade.gradedAt).toLocaleString()}</small></p>
              </div>
            ` : '<p>Not graded yet</p>';
            
            submissionsHTML += `
              <div class="student-submission-card">
                <h4>${student.name}</h4>
                <p><strong>Activity:</strong> ${activity.title}</p>
                <p><strong>Type:</strong> ${activity.type}</p>
                <p><strong>Due Date:</strong> ${activity.date}</p>
                
                ${activity.submission.link ? `
                  <div class="submission-link">
                    <strong>Submission Link:</strong><br>
                    <a href="${activity.submission.link}" target="_blank">${activity.submission.link}</a>
                  </div>
                ` : ''}
                
                ${activity.submission.fileName ? `
                  <div class="submission-link">
                    <strong>Submitted File:</strong><br>
                    ${activity.submission.fileName} (${formatFileSize(activity.submission.fileSize)})
                  </div>
                ` : ''}
                
                <div class="submission-date">
                  Submitted on: ${new Date(activity.submission.submittedAt).toLocaleString()}
                </div>
                
                ${gradeDisplay}
                
                <div class="grade-actions">
                  <button class="grade-btn primary" onclick="openGradeSubmission('${activity.id}', '${student.email}')">
                    ${activity.grade ? 'Update Grade' : 'Add Grade'}
                  </button>
                  <button class="grade-btn secondary" onclick="viewStudentSubmission('${activity.id}', '${student.email}')">
                    View Submission
                  </button>
                </div>
              </div>
            `;
          });
        }
      });
      
      studentSubmissions.innerHTML = submissionsHTML;
    }
    
    function openGradeSubmission(activityId, studentEmail) {
      selectedSubmissionForGrading = { activityId, studentEmail };
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const activity = activities.find(a => a.id === activityId && a.submission.submittedBy === studentEmail);
      
      if (!activity) return;
      
      document.getElementById('gradeSubmissionTitle').textContent = `Grade Submission - ${activity.title}`;
      
      let submissionHTML = `
        <div class="event-details">
          <h4>${activity.title}</h4>
          <p><strong>Student:</strong> ${studentEmail}</p>
          <p><strong>Type:</strong> ${activity.type}</p>
          <p><strong>Due Date:</strong> ${activity.date}</p>
          
          ${activity.submission.link ? `
            <div class="submission-link">
              <strong>Submission Link:</strong><br>
              <a href="${activity.submission.link}" target="_blank">${activity.submission.link}</a>
            </div>
          ` : ''}
          
          ${activity.submission.fileName ? `
            <div class="submission-link">
              <strong>Submitted File:</strong><br>
              ${activity.submission.fileName} (${formatFileSize(activity.submission.fileSize)})
            </div>
          ` : ''}
        </div>
      `;
      
      // Pre-fill grade if already graded
      if (activity.grade) {
        document.getElementById('gradeInput').value = activity.grade.score;
      } else {
        document.getElementById('gradeInput').value = '';
      }
      
      document.getElementById('gradeSubmissionContent').innerHTML = submissionHTML;
      document.getElementById('gradeSubmissionModal').classList.add('active');
    }
    
    function closeGradeSubmissionModal() {
      document.getElementById('gradeSubmissionModal').classList.remove('active');
      selectedSubmissionForGrading = null;
    }
    
    function submitGrade() {
      if (!selectedSubmissionForGrading) return;
      
      const gradeInput = document.getElementById('gradeInput');
      const score = parseInt(gradeInput.value);
      
      if (isNaN(score) || score < 0 || score > 100) {
        alert('Please enter a valid score between 0 and 100.');
        return;
      }
      
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const activityIndex = activities.findIndex(a => 
        a.id === selectedSubmissionForGrading.activityId && 
        a.submission.submittedBy === selectedSubmissionForGrading.studentEmail
      );
      
      if (activityIndex === -1) return;
      
      activities[activityIndex].grade = {
        score: score,
        gradedAt: new Date().toISOString(),
        gradedBy: localStorage.getItem('userEmail') || 'professor@example.com'
      };
      
      localStorage.setItem('studentActivities', JSON.stringify(activities));
      
      // Close modal and reload
      closeGradeSubmissionModal();
      loadStudentSubmissions();
      
      alert('Grade submitted successfully!');
    }
    
    function viewStudentSubmission(activityId, studentEmail) {
      const activities = JSON.parse(localStorage.getItem('studentActivities')) || [];
      const activity = activities.find(a => a.id === activityId && a.submission.submittedBy === studentEmail);
      
      if (!activity || !activity.submission) return;
      
      document.getElementById('submissionViewerTitle').textContent = `Submission: ${activity.title}`;
      
      let submissionContentHTML = `
        <div class="submission-viewer">
          <h4>Student Submission Details</h4>
          <div class="submission-content">
            <h5>${activity.title}</h5>
            <p><strong>Student:</strong> ${studentEmail}</p>
            <p><strong>Type:</strong> ${activity.type}</p>
            <p><strong>Due Date:</strong> ${activity.date}</p>
            <p><strong>Submitted on:</strong> ${new Date(activity.submission.submittedAt).toLocaleString()}</p>
            
            ${activity.description ? `<p><strong>Description:</strong> ${activity.description}</p>` : ''}
          </div>
          
          <div class="submission-preview">
            <h6>Submitted Work</h6>
            
            ${activity.submission.link ? `
              <div class="file-preview-container">
                <p><strong>Submission Link:</strong></p>
                <div class="submission-link">
                  <a href="${activity.submission.link}" target="_blank">${activity.submission.link}</a>
                </div>
                <div class="embedded-content">
                  <iframe src="${activity.submission.link}" width="100%" height="100%" frameborder="0"></iframe>
                </div>
              </div>
            ` : ''}
            
            ${activity.submission.fileName ? `
              <div class="file-preview-container">
                <p><strong>Submitted File:</strong> ${activity.submission.fileName}</p>
                <div class="no-preview">
                  <p>File: ${activity.submission.fileName}</p>
                  <p>Size: ${formatFileSize(activity.submission.fileSize)}</p>
                  <p>Type: ${activity.submission.fileType}</p>
                  <p><em>Note: In a real application, this would display the file content</em></p>
                </div>
              </div>
            ` : ''}
            
            ${!activity.submission.link && !activity.submission.fileName ? `
              <div class="no-preview">
                <p>No submission content available to preview.</p>
              </div>
            ` : ''}
          </div>
        </div>
      `;
      
      document.getElementById('submissionViewerContent').innerHTML = submissionContentHTML;
      document.getElementById('submissionViewerModal').classList.add('active');
    }
    
    function closeSubmissionViewerModal() {
      document.getElementById('submissionViewerModal').classList.remove('active');
    }

    // Logout function
    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('userEmail');
      window.location.href = 'login.html';
    }

    // Check login status
    function checkLoginStatus() {
      if (localStorage.getItem('isLoggedIn') !== 'true') {
        // For demo purposes, we'll simulate a logged-in user
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('userEmail', 'student@example.com');
      }
    }

    // Initialize dashboard
    window.onload = function() {
      checkLoginStatus();
      displayUserInfo();
      
      // Add sample events if none exist
      if (!localStorage.getItem('calendarEvents')) {
        const today = new Date();
        const sampleEvents = [
          {
            title: 'HTML/CSS Project',
            type: 'assignment',
            date: `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${(today.getDate() + 2).toString().padStart(2, '0')}`,
            description: 'Create a responsive portfolio website using HTML and CSS',
            files: [
              {
                name: 'Project Guidelines.pdf',
                size: 1024000,
                type: 'pdf',
                url: '#'
              },
              {
                name: 'Sample Design.wps',
                size: 512000,
                type: 'wps',
                url: '#'
              }
            ]
          },
          {
            title: 'Midterm Exam',
            type: 'exam',
            date: `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${(today.getDate() + 7).toString().padStart(2, '0')}`,
            description: 'Covering chapters 1-5',
            files: [
              {
                name: 'Study Guide.docx',
                size: 2048000,
                type: 'doc',
                url: '#'
              }
            ]
          }
        ];
        localStorage.setItem('calendarEvents', JSON.stringify(sampleEvents));
      }
      
      // Add professor to participants if not already there
      const participants = JSON.parse(localStorage.getItem('classParticipants')) || [];
      const professorExists = participants.some(p => p.role === 'professor');
      
      if (!professorExists) {
        participants.push({
          name: 'Prof. Jerome A Yanga',
          email: 'prof.yanga@example.com',
          role: 'professor',
          joinedAt: new Date().toISOString()
        });
        
        localStorage.setItem('classParticipants', JSON.stringify(participants));
      }
      
      // Set today's date as default for activity form
      const today = new Date();
      const formattedDate = today.toISOString().split('T')[0];
      document.getElementById("activityDate").value = formattedDate;
    };
  </script>
</body>
</html>